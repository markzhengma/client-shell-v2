(this["webpackJsonpclient-shell-v2"]=this["webpackJsonpclient-shell-v2"]||[]).push([[0],{20:function(e,t,a){e.exports=a(44)},25:function(e,t,a){},26:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(19),s=a.n(r),c=(a(25),a(1)),l=a(2),o=a(5),u=a(3),h=a(6),d=(a(26),a(4)),m=a(7),p=a.n(m),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleAdminLogin=function(e){e.preventDefault(),""===a.state.admin_name||""===a.state.admin_pass?alert("\u8bf7\u8f93\u5165\u7ba1\u7406\u5458\u8d26\u53f7\u548c\u5bc6\u7801"):p.a.get("https://www.hailarshell.cn/api/admin/login?admin=".concat(a.state.admin_name,"&pass=").concat(a.state.admin_pass)).then((function(e){200!==e.data.code?422===e.data.code?alert("\u8f93\u5165\u683c\u5f0f\u6709\u8bef"):alert("\u8bf7\u518d\u6b21\u68c0\u67e5\u8d26\u53f7\u548c\u5bc6\u7801"):(a.props.setAdmin(e.data.data),a.props.handlePageChange("admin"))})).catch((function(e){console.log(e)}))},a.state={admin_name:"",admin_pass:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(d.a)({},n,a))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleAdminLogin.bind(this)},i.a.createElement("input",{type:"text",name:"admin_name",value:this.state.admin_name,onChange:this.handleChange.bind(this),placeholder:"\u7ba1\u7406\u5458\u8d26\u53f7"}),i.a.createElement("input",{type:"password",name:"admin_pass",value:this.state.admin_pass,onChange:this.handleChange.bind(this),placeholder:"\u7ba1\u7406\u5458\u5bc6\u7801"}),i.a.createElement("button",{type:"submit"},"\u767b\u5f55")))}}]),t}(n.Component),g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={filter:"record_num",value:"",data:{}},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(d.a)({},n,a))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",null,"\u59d3\u540d\uff1a",this.props.userData.user_name||""),i.a.createElement("div",null,"\u6362\u6cb9\u8bc1\u53f7\uff1a",this.props.userData.record_num||""),i.a.createElement("div",null,"\u8054\u7cfb\u65b9\u5f0f\uff1a",this.props.userData.phone||""),i.a.createElement("div",null,"\u8f66\u724c\u53f7\uff1a",this.props.userData.plate||""),i.a.createElement("div",null,"\u8f66\u578b\uff1a",this.props.userData.make||""),i.a.createElement("div",null,"\u5907\u6ce8\uff1a",this.props.userData.detail||""))}}]),t}(n.Component),f=a(9),b=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={filter:"record_num",value:"",user_input:{user_name:"",phone:"",plate:"",make:"",detail:""}},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setState({user_input:{user_name:this.props.userData.user_name,phone:this.props.userData.phone,plate:this.props.userData.plate,make:this.props.userData.make,detail:this.props.userData.detail}})}},{key:"handleUserUpdateChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({user_input:Object(f.a)({},this.state.user_input,Object(d.a)({},n,a))})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:function(t){return e.props.confirmUserUpdate(t,e.state.user_input)}},i.a.createElement("input",{value:this.props.userData.record_num,disabled:!0}),i.a.createElement("input",{name:"user_name",defaultValue:this.props.userData.user_name,onChange:this.handleUserUpdateChange.bind(this)}),i.a.createElement("input",{name:"phone",defaultValue:this.props.userData.phone,onChange:this.handleUserUpdateChange.bind(this)}),i.a.createElement("input",{name:"plate",defaultValue:this.props.userData.plate,onChange:this.handleUserUpdateChange.bind(this)}),i.a.createElement("input",{name:"make",defaultValue:this.props.userData.make,onChange:this.handleUserUpdateChange.bind(this)}),i.a.createElement("input",{name:"detail",defaultValue:this.props.userData.detail,onChange:this.handleUserUpdateChange.bind(this)}),i.a.createElement("button",{type:"submit"},"\u4fdd\u5b58")))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={newRecord:{date:"",product_name:"",milage:"",gift:"",operator:"",detail:""}},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"resetInput",value:function(){this.setState({newRecord:{date:"",product_name:"",milage:"",gift:"",operator:"",detail:""}})}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({newRecord:Object(f.a)({},this.state.newRecord,Object(d.a)({},n,a))})}},{key:"handleNewRecordSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.record_num;p()({url:"https://www.hailarshell.cn/api/record/user/".concat(a),method:"POST",data:{date:this.state.newRecord.date,gift:this.state.newRecord.gift,milage:this.state.newRecord.milage,operator:this.state.newRecord.operator,product_name:this.state.newRecord.product_name,detail:this.state.newRecord.detail}}).then((function(a){200!==a.data.code?(alert(a.data.code+"\n"+JSON.stringify(a.data.data)),console.log(a.data.data)):(console.log(a),t.resetInput(),t.props.handleFindUserSubmit(e))})).catch((function(e){alert(e),console.log(e)}))}},{key:"handleDeleteRecord",value:function(e,t){var a=this;p.a.delete("https://www.hailarshell.cn/api/record/single/".concat(t)).then((function(t){200!==t.data.code?(alert(t.data.code+"\n"+JSON.stringify(t.data.data)),console.log(t.data.data)):(console.log(t),a.props.handleFindUserSubmit(e))})).catch((function(e){alert(e),console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.props.recordListData;return i.a.createElement("div",null,i.a.createElement("div",{className:"record-single"},i.a.createElement("div",{className:"record-column"},"\u65e5\u671f"),i.a.createElement("div",{className:"record-column"},"\u9879\u76ee\u540d\u79f0"),i.a.createElement("div",{className:"record-column"},"\u8868\u793a\u91cc\u7a0b"),i.a.createElement("div",{className:"record-column"},"\u8d60\u54c1\u60c5\u51b5"),i.a.createElement("div",{className:"record-column"},"\u64cd\u4f5c\u4eba"),i.a.createElement("div",{className:"record-column"},"\u5907\u6ce8"),i.a.createElement("div",{className:"record-column"},"\u64cd\u4f5c")),i.a.createElement("form",{onSubmit:this.handleNewRecordSubmit.bind(this)},i.a.createElement("div",{className:"record-single"},i.a.createElement("div",{className:"record-column"},i.a.createElement("input",{name:"date",onChange:this.handleChange.bind(this),placeholder:"\u65e5\u671f"})),i.a.createElement("div",{className:"record-column"},i.a.createElement("input",{name:"product_name",onChange:this.handleChange.bind(this),placeholder:"\u9879\u76ee\u540d\u79f0"})),i.a.createElement("div",{className:"record-column"},i.a.createElement("input",{name:"milage",onChange:this.handleChange.bind(this),placeholder:"\u8868\u793a\u91cc\u7a0b"})),i.a.createElement("div",{className:"record-column"},i.a.createElement("input",{name:"gift",onChange:this.handleChange.bind(this),placeholder:"\u8d60\u54c1\u60c5\u51b5"})),i.a.createElement("div",{className:"record-column"},i.a.createElement("input",{name:"operator",onChange:this.handleChange.bind(this),placeholder:"\u64cd\u4f5c\u4eba"})),i.a.createElement("div",{className:"record-column"},i.a.createElement("input",{name:"detail",onChange:this.handleChange.bind(this),placeholder:"\u5907\u6ce8"})),i.a.createElement("div",{className:"record-column"},i.a.createElement("button",{type:"submit"},"\u4fdd\u5b58")))),t.map((function(t){return i.a.createElement("div",{className:"record-single",key:t._id,id:t._id},i.a.createElement("div",{className:"record-column"},t.date),i.a.createElement("div",{className:"record-column"},t.product_name),i.a.createElement("div",{className:"record-column"},t.milage),i.a.createElement("div",{className:"record-column"},t.gift),i.a.createElement("div",{className:"record-column"},t.operator),i.a.createElement("div",{className:"record-column"},t.detail),i.a.createElement("div",{className:"record-column"},i.a.createElement("button",null,"\u7f16\u8f91"),i.a.createElement("button",{onClick:function(a){return e.handleDeleteRecord(a,t._id)}},"\u5220\u9664")))})))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={filter:"record_num",value:"",userData:"",recordListData:[],isUserUpdating:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(d.a)({},n,a))}},{key:"resetStates",value:function(){this.setState({filter:"record_num",value:"",userData:"",recordListData:""})}},{key:"changeUserUpdate",value:function(){this.setState({isUserUpdating:!this.state.isUserUpdating})}},{key:"confirmUserUpdate",value:function(e,t){var a=this;e.preventDefault(),p()({url:"https://www.hailarshell.cn/api/user/single/".concat(this.state.userData.record_num),method:"PUT",data:{make:t.make,phone:t.phone,plate:t.plate,user_name:t.user_name,detail:t.detail}}).then((function(t){200===t.data.code&&(a.changeUserUpdate(),a.handleFindUserSubmit(e))})).catch((function(e){console.log(e)}))}},{key:"confirmUserDelete",value:function(){var e=this;window.confirm("\u786e\u5b9a\u5220\u9664\u7528\u6237".concat(this.state.userData.user_name,"\uff1f"))&&p.a.delete("https://www.hailarshell.cn/api/user/single/".concat(this.state.userData.record_num)).then((function(t){200!==t.data.code?alert(t.data.code+"\n"+JSON.stringify(t.data.data)):e.resetStates()})).catch((function(e){alert(e),console.log(e)}))}},{key:"handleFindUserSubmit",value:function(e){var t=this;e.preventDefault(),p.a.get("https://www.hailarshell.cn/api/user/single?filter=".concat(this.state.filter,"&value=").concat(this.state.value)).then((function(e){if(200!==e.data.code)alert(e.data.code+"\n"+JSON.stringify(e.data.data));else{t.setState({userData:e.data.data});var a=e.data.data.record_num;p.a.get("https://www.hailarshell.cn/api/record/user/".concat(a)).then((function(e){200!==e.data.code?(alert(e.data),console.log(e.data)):t.setState({recordListData:e.data.data})})).catch((function(e){alert(e),console.log(e)}))}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("form",{onSubmit:this.handleFindUserSubmit.bind(this)},i.a.createElement("select",{name:"filter",value:this.state.filter,onChange:this.handleChange.bind(this)},i.a.createElement("option",{value:"record_num"},"\u6309\u6362\u6cb9\u8bc1\u53f7\u67e5\u627e"),i.a.createElement("option",{value:"phone"},"\u6309\u624b\u673a\u53f7\u67e5\u627e"),i.a.createElement("option",{value:"plate"},"\u6309\u8f66\u724c\u53f7\u67e5\u627e")),i.a.createElement("input",{type:"text",name:"value",value:this.state.value,onChange:this.handleChange.bind(this),placeholder:"\u5185\u5bb9"}),i.a.createElement("button",{type:"submit"},"\u67e5\u627e")),""!==this.state.userData?this.state.isUserUpdating?i.a.createElement(b,{userData:this.state.userData,confirmUserUpdate:this.confirmUserUpdate.bind(this)}):i.a.createElement("div",null,i.a.createElement(g,{userData:this.state.userData}),i.a.createElement("button",{onClick:this.changeUserUpdate.bind(this)},"\u7f16\u8f91\u5ba2\u6237\u4fe1\u606f"),i.a.createElement("button",{onClick:this.confirmUserDelete.bind(this)},"\u5220\u9664\u5ba2\u6237\u4fe1\u606f"),i.a.createElement(E,{recordListData:this.state.recordListData,record_num:this.state.userData.record_num,handleFindUserSubmit:this.handleFindUserSubmit.bind(this)})):"")}}]),t}(n.Component),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={userData:"",user_name:"",record_num:"",phone:"",plate:"",make:""},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(d.a)({},n,a))}},{key:"handleNewUserSubmit",value:function(e){var t=this;e.preventDefault(),window.confirm("\u8bf7\u6838\u5bf9\u65b0\u7528\u6237\u4fe1\u606f\uff1a\n".concat(this.state.user_name,"\n").concat(this.state.record_num,"\n").concat(this.state.phone,"\n").concat(this.state.make,"\n").concat(this.state.plate))&&p()({url:"https://www.hailarshell.cn/api/user/single",method:"POST",data:{make:this.state.make,phone:this.state.phone,plate:this.state.plate,record_num:this.state.record_num,user_name:this.state.user_name}}).then((function(e){200!==e.data.code?alert(e.data.code+"\n"+JSON.stringify(e.data.data)):t.setState({userData:e.data.data})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){return i.a.createElement("div",null,""!==this.state.userData?i.a.createElement("div",null,i.a.createElement("h3",null,"\u65b0\u7528\u6237\uff1a"),i.a.createElement(g,{userData:this.state.userData})):i.a.createElement("div",{className:"user-box"},"\u5ba2\u6237\u59d3\u540d\uff1a",i.a.createElement("input",{className:"input-single",name:"user_name",onChange:this.handleChange.bind(this),value:this.state.user_name}),"\u6362\u6cb9\u8bc1\u53f7\uff1a",i.a.createElement("input",{className:"input-single",name:"record_num",onChange:this.handleChange.bind(this),value:this.state.record_num}),"\u8054\u7cfb\u65b9\u5f0f\uff1a",i.a.createElement("input",{className:"input-single",name:"phone",onChange:this.handleChange.bind(this),value:this.state.phone}),"\u8f66\u724c\u53f7\uff1a",i.a.createElement("input",{className:"input-single",name:"plate",onChange:this.handleChange.bind(this),value:this.state.plate}),"\u8f66\u578b\uff1a",i.a.createElement("input",{className:"input-single",name:"make",onChange:this.handleChange.bind(this),value:this.state.make}),i.a.createElement("button",{className:"submit-btn",onClick:this.handleNewUserSubmit.bind(this)},"\u521b\u5efa")))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={action:"find_user"},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(d.a)({},n,a))}},{key:"changeAction",value:function(e){this.setState({action:e})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("div",{className:"nav-bar"},i.a.createElement("div",{className:"nav-btn",onClick:function(){return e.changeAction("find_user")}},"\u67e5\u627e\u8001\u7528\u6237"),i.a.createElement("div",{className:"nav-btn",onClick:function(){return e.changeAction("new_user")}},"\u521b\u5efa\u65b0\u7528\u6237")),"find_user"===this.state.action?i.a.createElement(k,null):"","new_user"===this.state.action?i.a.createElement(C,{changeAction:this.changeAction.bind(this)}):"")}}]),t}(n.Component),_=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).state={admin:{},page:"login"},e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"setAdmin",value:function(e){this.setState({admin:e})}},{key:"handlePageChange",value:function(e){this.setState({page:e})}},{key:"componentDidMount",value:function(){console.log("client initiated")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",null,"Shell"),"login"===this.state.page?i.a.createElement(v,{setAdmin:this.setAdmin.bind(this),handlePageChange:this.handlePageChange.bind(this)}):"","admin"===this.state.page?i.a.createElement(w,{handlePageChange:this.handlePageChange.bind(this)}):"")}}]),t}(n.Component),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(i.a.createElement(_,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/client-shell-v2",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/client-shell-v2","/service-worker.js");O?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):y(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):y(e)}))}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.2d93e272.chunk.js.map