(this["webpackJsonpclient-shell-v2"]=this["webpackJsonpclient-shell-v2"]||[]).push([[0],{40:function(e,t,a){e.exports=a(69)},45:function(e,t,a){},46:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),i=(a(45),a(5)),o=a(6),s=a(9),d=a(7),u=a(8),m=(a(46),a(47),a(74)),h=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={admin_name:"",admin_pass:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{sticky:"top",className:"header"},r.a.createElement("h1",null,"\u58f3\u724c\u6da6\u6ed1\u6cb9"))}}]),t}(n.Component),p=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={admin_name:"",admin_pass:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{sticky:"bottom",className:"footer"},r.a.createElement("div",{className:"footer-info"},r.a.createElement("h5",null,"\u547c\u4f26\u8d1d\u5c14\u5e02\u4f73\u6da6\u7269\u8d44\u6709\u9650\u516c\u53f8"),r.a.createElement("p",null,"0470-8223779")),r.a.createElement("div",{className:"footer-legal"},r.a.createElement("a",{href:"http://beian.miit.gov.cn",target:"_blank"},"\u8499ICP\u590719005903\u53f7-1")))}}]),t}(n.Component),g=a(11),E=a(10),f=a.n(E),v=a(75),b=a(77),_=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).handleAdminLogin=function(e){e.preventDefault(),""===a.state.admin_name||""===a.state.admin_pass?alert("\u8bf7\u8f93\u5165\u7ba1\u7406\u5458\u8d26\u53f7\u548c\u5bc6\u7801"):f.a.get("https://api.hailarshell.cn/api/admin/login?admin=".concat(a.state.admin_name,"&pass=").concat(a.state.admin_pass)).then((function(e){200!==e.data.code?422===e.data.code?alert("\u8f93\u5165\u683c\u5f0f\u6709\u8bef"):alert("\u8bf7\u518d\u6b21\u68c0\u67e5\u8d26\u53f7\u548c\u5bc6\u7801"):(a.props.setAdmin(e.data.data),a.props.handlePageChange("admin"))})).catch((function(e){console.log(e)}))},a.state={admin_name:"",admin_pass:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(g.a)({},n,a))}},{key:"render",value:function(){return r.a.createElement("div",{className:"login"},r.a.createElement(v.a,{className:"login-form",onSubmit:this.handleAdminLogin.bind(this)},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u7ba1\u7406\u5458\u8d26\u53f7"),r.a.createElement(v.a.Control,{name:"admin_name",value:this.state.admin_name,onChange:this.handleChange.bind(this),type:"text",placeholder:"\u7ba1\u7406\u5458\u8d26\u53f7"})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u7ba1\u7406\u5458\u5bc6\u7801"),r.a.createElement(v.a.Control,{name:"admin_pass",value:this.state.admin_pass,onChange:this.handleChange.bind(this),type:"password",placeholder:"\u7ba1\u7406\u5458\u5bc6\u7801"})),r.a.createElement(b.a,{variant:"success",type:"submit"},"\u767b\u5f55")))}}]),t}(n.Component),y=a(71),C=a(17),k=a(76),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={filter:"record_num",value:"",data:{}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(g.a)({},n,a))}},{key:"render",value:function(){return r.a.createElement(k.a.Body,null,r.a.createElement(k.a.Header,null,r.a.createElement(k.a.Title,null,this.props.userData.user_name||"")),r.a.createElement(k.a.Text,{className:"mb-2"},"\u6362\u6cb9\u8bc1\u53f7"),r.a.createElement(k.a.Text,null,this.props.userData.record_num||""),r.a.createElement(k.a.Text,{className:"mb-2"},"\u8054\u7cfb\u65b9\u5f0f"),r.a.createElement(k.a.Text,null,this.props.userData.phone||""),r.a.createElement(k.a.Text,{className:"mb-2"},"\u8f66\u724c\u53f7"),r.a.createElement(k.a.Text,null,this.props.userData.plate||""),r.a.createElement(k.a.Text,{className:"mb-2"},"\u8f66\u578b"),r.a.createElement(k.a.Text,null,this.props.userData.make||""),r.a.createElement(k.a.Text,{className:"mb-2"},"\u5907\u6ce8"),r.a.createElement(k.a.Text,null,this.props.userData.detail||""))}}]),t}(n.Component),U=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).state={filter:"record_num",value:""},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.setState({user_input:{user_name:this.props.userData.user_name,phone:this.props.userData.phone,plate:this.props.userData.plate,make:this.props.userData.make,detail:this.props.userData.detail}})}},{key:"render",value:function(){var e=this;return r.a.createElement(v.a,{onSubmit:function(t){return e.props.confirmUserUpdate(t)}},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u8f66\u4e3b\u59d3\u540d"),r.a.createElement(v.a.Control,{name:"user_name",defaultValue:this.props.userData.user_name,onChange:this.props.handleUserUpdateChange.bind(this)})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u6362\u6cb9\u8bc1\u53f7"),r.a.createElement(v.a.Control,{value:this.props.userData.record_num,disabled:!0})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u8054\u7cfb\u65b9\u5f0f"),r.a.createElement(v.a.Control,{name:"phone",defaultValue:this.props.userData.phone,onChange:this.props.handleUserUpdateChange.bind(this)})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u8f66\u724c\u53f7"),r.a.createElement(v.a.Control,{name:"plate",defaultValue:this.props.userData.plate,onChange:this.props.handleUserUpdateChange.bind(this)})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u8f66\u578b"),r.a.createElement(v.a.Control,{name:"make",defaultValue:this.props.userData.make,onChange:this.props.handleUserUpdateChange.bind(this)})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u5907\u6ce8"),r.a.createElement(v.a.Control,{as:"textarea",rows:"3",name:"detail",defaultValue:this.props.userData.detail,onChange:this.props.handleUserUpdateChange.bind(this)})),r.a.createElement(y.a,{style:{width:"100%"}},r.a.createElement(b.a,{variant:"success",type:"submit"},"\u4fdd\u5b58"),r.a.createElement(b.a,{variant:"warning",onClick:this.props.cancelUserUpdate},"\u53d6\u6d88")))}}]),t}(n.Component),w=a(72),O=a(37),j=a(73),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={newRecord:{date:"",product_name:"",milage:"",gift:"",operator:"",detail:"\u65e0",reminder:"\u65e0"},updateRecord:{date:"",product_name:"",milage:"",gift:"",operator:"",detail:"",reminder:""},selectUpdateId:"",currDate:"",randomKey:0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),this.setState({currDate:[n,t,a].join("-"),newRecord:Object(C.a)({},this.state.newRecord,{date:[n,t,a].join("-")})})}},{key:"resetInput",value:function(){this.setState({newRecord:{date:this.state.currDate,product_name:"",milage:"",gift:"",operator:"",detail:"\u65e0",reminder:"\u65e0"}})}},{key:"handleNewRecordChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({newRecord:Object(C.a)({},this.state.newRecord,Object(g.a)({},n,a))})}},{key:"handleUpdateRecordChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({updateRecord:Object(C.a)({},this.state.updateRecord,Object(g.a)({},n,a))})}},{key:"resetNewRecordForm",value:function(){this.setState({randomKey:Math.random()})}},{key:"handleNewRecordSubmit",value:function(e){var t=this;if(e.preventDefault(),""===this.state.newRecord.date||""===this.state.newRecord.gift||""===this.state.newRecord.milage||""===this.state.newRecord.operator||""===this.state.newRecord.product_name||""===this.state.newRecord.detail||""===this.state.newRecord.reminder)alert("\u4eb2\uff0c\u8bf7\u5c06\u4fdd\u517b\u8bb0\u5f55\u586b\u5199\u5b8c\u6574\u54df~");else{var a=this.props.record_num;f()({url:"https://api.hailarshell.cn/api/record/user/".concat(a),method:"POST",data:{date:this.state.newRecord.date,gift:this.state.newRecord.gift,milage:this.state.newRecord.milage,operator:this.state.newRecord.operator,product_name:this.state.newRecord.product_name,detail:this.state.newRecord.detail,reminder:this.state.newRecord.reminder}}).then((function(a){200!==a.data.code?(alert(a.data.code+"\n"+JSON.stringify(a.data.data)),console.log(a.data.data)):(console.log(a),t.resetNewRecordForm(),t.resetInput(),t.props.handleFindUserSubmit(e))})).catch((function(e){alert(e),console.log(e)}))}}},{key:"handleDeleteRecord",value:function(e,t){var a=this;f.a.delete("https://api.hailarshell.cn/api/record/single/".concat(t)).then((function(t){200!==t.data.code?(alert(t.data.code+"\n"+JSON.stringify(t.data.data)),console.log(t.data.data)):(console.log(t),a.props.handleFindUserSubmit(e))})).catch((function(e){alert(e),console.log(e)}))}},{key:"selectUpdateRecord",value:function(e){this.setState({updateRecord:{date:e.date,product_name:e.product_name,milage:e.milage,gift:e.gift,operator:e.operator,detail:e.detail,reminder:e.reminder},selectUpdateId:e._id})}},{key:"confirmUpdateRecord",value:function(e){var t=this;e.preventDefault(),f()({url:"https://api.hailarshell.cn/api/record/single/".concat(this.state.selectUpdateId),method:"PUT",data:this.state.updateRecord}).then((function(a){200===a.data.code&&(t.resetUpdateRecord(),t.props.handleFindUserSubmit(e))})).catch((function(e){console.log(e)}))}},{key:"resetUpdateRecord",value:function(){this.setState({updateRecord:{date:"",product_name:"",milage:"",gift:"",operator:"",detail:"",reminder:""},selectUpdateId:""})}},{key:"render",value:function(){var e=this,t=this.props.recordListData;return r.a.createElement("div",{className:"record-list"},r.a.createElement("div",null,r.a.createElement("h5",null,"\u65b0\u4fdd\u517b\u8bb0\u5f55"),r.a.createElement(v.a,{className:"new-record-form",onSubmit:this.handleNewRecordSubmit.bind(this),key:this.state.randomKey},r.a.createElement(w.a,null,r.a.createElement(O.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u65e5\u671f"),r.a.createElement(v.a.Control,{type:"date",name:"date",value:this.state.newRecord.date,onChange:this.handleNewRecordChange.bind(this),placeholder:"\u65e5\u671f"}))),r.a.createElement(O.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u9879\u76ee\u540d\u79f0"),r.a.createElement(v.a.Control,{as:"select",name:"product_name",defaultValue:"",onChange:this.handleNewRecordChange.bind(this)},r.a.createElement("option",{value:"",disabled:!0},"\u3010\u8bf7\u9009\u62e9\u3011"),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u6c7d\u673a\u6cb9\u3011"),this.props.productData.map((function(e){if("\u6c7d\u673a\u6cb9"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u67f4\u673a\u6cb9\u3011"),this.props.productData.map((function(e){if("\u67f4\u673a\u6cb9"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u4e2d\u534e\u4ea7\u54c1\u3011"),this.props.productData.map((function(e){if("\u4e2d\u534e\u4ea7\u54c1"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u9644\u5c5e\u54c1\u3011"),this.props.productData.map((function(e){if("\u9644\u5c5e\u54c1"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)}))))),r.a.createElement(O.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u8868\u793a\u91cc\u7a0b"),r.a.createElement(v.a.Control,{name:"milage",onChange:this.handleNewRecordChange.bind(this),placeholder:"\u8868\u793a\u91cc\u7a0b"}))),r.a.createElement(O.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u8d60\u54c1\u60c5\u51b5"),r.a.createElement(v.a.Control,{as:"select",name:"gift",defaultValue:"",onChange:this.handleNewRecordChange.bind(this)},r.a.createElement("option",{value:"",disabled:!0},"\u3010\u8bf7\u9009\u62e9\u3011"),r.a.createElement("option",{value:"(\u8d60\u54c1\u672a\u9886)"},"(\u8d60\u54c1\u672a\u9886)"),this.props.giftData.map((function(e){if("(\u8d60\u54c1\u672a\u9886)"!==e.gift_name)return r.a.createElement("option",{value:e.gift_name,key:e._id},e.gift_name)}))))),r.a.createElement(O.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u64cd\u4f5c\u4eba"),r.a.createElement(v.a.Control,{as:"select",name:"operator",defaultValue:"",onChange:this.handleNewRecordChange.bind(this)},r.a.createElement("option",{value:"",disabled:!0},"\u3010\u8bf7\u9009\u62e9\u3011"),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u6d77\u62c9\u5c14\u3011"),this.props.operatorData.map((function(e){if("\u6d77\u62c9\u5c14"===e.location)return r.a.createElement("option",{value:e.op_name,key:e._id},e.op_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u6ee1\u6d32\u91cc\u3011"),this.props.operatorData.map((function(e){if("\u6ee1\u6d32\u91cc"===e.location)return r.a.createElement("option",{value:e.op_name,key:e._id},e.op_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u7259\u514b\u77f3\u3011"),this.props.operatorData.map((function(e){if("\u7259\u514b\u77f3"===e.location)return r.a.createElement("option",{value:e.op_name,key:e._id},e.op_name)}))))),r.a.createElement(O.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u79ef\u5206/\u5907\u6ce8"),r.a.createElement(v.a.Control,{name:"detail",value:this.state.newRecord.detail,onChange:this.handleNewRecordChange.bind(this),placeholder:"\u79ef\u5206/\u5907\u6ce8"}))),r.a.createElement(O.a,null,r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u4fdd\u517b\u63d0\u9192"),r.a.createElement(v.a.Control,{name:"reminder",value:this.state.newRecord.reminder,onChange:this.handleNewRecordChange.bind(this),placeholder:"\u4fdd\u517b\u63d0\u9192"}))),r.a.createElement(O.a,null,r.a.createElement("div",{style:{margin:"0 0 8px 0"}},"\u64cd\u4f5c"),r.a.createElement(b.a,{variant:"primary",style:{margin:"5px"},type:"submit"},"\u4fdd\u5b58"),r.a.createElement(b.a,{variant:"warning",style:{margin:"5px"},onClick:this.resetNewRecordForm.bind(this)},"\u91cd\u7f6e"))))),t?r.a.createElement("div",null,r.a.createElement("h5",null,"\u4fdd\u517b\u8bb0\u5f55\u5386\u53f2"),r.a.createElement(j.a,{striped:!0,bordered:!0,hover:!0,style:{backgroundColor:"grey",color:"white"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u65e5\u671f"),r.a.createElement("th",null,"\u9879\u76ee\u540d\u79f0"),r.a.createElement("th",null,"\u8868\u793a\u91cc\u7a0b"),r.a.createElement("th",null,"\u8d60\u54c1\u60c5\u51b5"),r.a.createElement("th",null,"\u64cd\u4f5c\u4eba"),r.a.createElement("th",null,"\u79ef\u5206/\u5907\u6ce8"),r.a.createElement("th",null,"\u4fdd\u517b\u63d0\u9192"),r.a.createElement("th",null,"\u64cd\u4f5c"))),r.a.createElement("tbody",null,t.map((function(t){return e.state.selectUpdateId!==t._id?r.a.createElement("tr",{key:t._id,id:t._id},r.a.createElement("td",{className:"record-list-column"},t.date),r.a.createElement("td",{className:"record-list-column"},t.product_name),r.a.createElement("td",{className:"record-list-column"},t.milage),r.a.createElement("td",{className:"record-list-column"},t.gift),r.a.createElement("td",{className:"record-list-column"},t.operator),r.a.createElement("td",{className:"record-list-column"},t.detail),r.a.createElement("td",{className:"record-list-column"},t.reminder),r.a.createElement("td",{className:"record-list-column"},r.a.createElement(b.a,{variant:"primary",onClick:function(a){return e.selectUpdateRecord(t)}},"\u7f16\u8f91"),r.a.createElement(b.a,{variant:"danger",onClick:function(a){return e.handleDeleteRecord(a,t._id)}},"\u5220\u9664"))):r.a.createElement("tr",{key:t._id,id:t._id},r.a.createElement("td",{className:"record-list-column"},r.a.createElement("input",{className:"edit-input",type:"date",defaultValue:t.date,name:"date",onChange:e.handleUpdateRecordChange.bind(e)})),r.a.createElement("td",{className:"record-list-column"},r.a.createElement("select",{className:"edit-select",name:"product_name",defaultValue:t.product_name,onChange:e.handleUpdateRecordChange.bind(e)},r.a.createElement("option",{value:"",disabled:!0},"\u3010\u9879\u76ee\u540d\u79f0\u3011"),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u6c7d\u673a\u6cb9\u3011"),e.props.productData.map((function(e){if("\u6c7d\u673a\u6cb9"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u67f4\u673a\u6cb9\u3011"),e.props.productData.map((function(e){if("\u67f4\u673a\u6cb9"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u4e2d\u534e\u4ea7\u54c1\u3011"),e.props.productData.map((function(e){if("\u4e2d\u534e\u4ea7\u54c1"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u9644\u5c5e\u54c1\u3011"),e.props.productData.map((function(e){if("\u9644\u5c5e\u54c1"===e.product_type)return r.a.createElement("option",{value:e.product_name,key:e._id},e.product_name)})))),r.a.createElement("td",{className:"record-list-column"},r.a.createElement("input",{className:"edit-input",defaultValue:t.milage,name:"milage",onChange:e.handleUpdateRecordChange.bind(e)})),r.a.createElement("td",{className:"record-list-column"},r.a.createElement("select",{className:"edit-select",name:"gift",defaultValue:t.gift,onChange:e.handleUpdateRecordChange.bind(e)},r.a.createElement("option",{value:"",disabled:!0},"\u3010\u8d60\u54c1\u60c5\u51b5\u3011"),r.a.createElement("option",{value:"(\u8d60\u54c1\u672a\u9886)"},"(\u8d60\u54c1\u672a\u9886)"),e.props.giftData.map((function(e){if("(\u8d60\u54c1\u672a\u9886)"!==e.gift_name)return r.a.createElement("option",{value:e.gift_name,key:e._id},e.gift_name)})))),r.a.createElement("td",{className:"record-list-column"},r.a.createElement("select",{className:"edit-select",name:"operator",defaultValue:t.operator,onChange:e.handleUpdateRecordChange.bind(e)},r.a.createElement("option",{value:"",disabled:!0},"\u3010\u64cd\u4f5c\u4eba\u3011"),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u6d77\u62c9\u5c14\u3011"),e.props.operatorData.map((function(e){if("\u6d77\u62c9\u5c14"===e.location)return r.a.createElement("option",{value:e.op_name,key:e._id},e.op_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u6ee1\u6d32\u91cc\u3011"),e.props.operatorData.map((function(e){if("\u6ee1\u6d32\u91cc"===e.location)return r.a.createElement("option",{value:e.op_name,key:e._id},e.op_name)})),r.a.createElement("option",{value:"",disabled:!0},"\u3010\u7259\u514b\u77f3\u3011"),e.props.operatorData.map((function(e){if("\u7259\u514b\u77f3"===e.location)return r.a.createElement("option",{value:e.op_name,key:e._id},e.op_name)})))),r.a.createElement("td",{className:"record-list-column"},r.a.createElement("input",{defaultValue:t.detail,name:"detail",onChange:e.handleUpdateRecordChange.bind(e)})),r.a.createElement("td",{className:"record-list-column"},r.a.createElement("input",{defaultValue:t.reminder,name:"reminder",onChange:e.handleUpdateRecordChange.bind(e)})),r.a.createElement("td",{className:"record-list-column"},r.a.createElement(b.a,{variant:"success",onClick:function(t){return e.confirmUpdateRecord(t)}},"\u4fdd\u5b58"),r.a.createElement(b.a,{variant:"warning",onClick:e.resetUpdateRecord.bind(e)},"\u53d6\u6d88")))}))))):"")}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={filter:"record_num",value:"",userData:"",recordListData:[],isUserUpdating:"",updateUser:{user_name:"",phone:"",plate:"",make:"",detail:""}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(g.a)({},n,a))}},{key:"handleUserUpdateChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState({updateUser:Object(C.a)({},this.state.updateUser,Object(g.a)({},n,a))})}},{key:"resetStates",value:function(){this.setState({filter:"record_num",value:"",userData:"",recordListData:""})}},{key:"changeUserUpdateStatus",value:function(){this.setState({isUserUpdating:!this.state.isUserUpdating})}},{key:"selectUserUpdate",value:function(){this.setState({isUserUpdating:!0,updateUser:this.state.userData})}},{key:"cancelUserUpdate",value:function(){this.setState({isUserUpdating:!1,updateUser:{user_name:"",phone:"",plate:"",make:"",detail:""}})}},{key:"confirmUserUpdate",value:function(e){var t=this;e.preventDefault(),console.log(this.state.updateUser),f()({url:"https://api.hailarshell.cn/api/user/single/".concat(this.state.userData.record_num),method:"PUT",data:{make:this.state.updateUser.make,phone:this.state.updateUser.phone,plate:this.state.updateUser.plate,user_name:this.state.updateUser.user_name,detail:this.state.updateUser.detail}}).then((function(a){200===a.data.code&&(t.cancelUserUpdate(),t.handleFindUserSubmit(e))})).catch((function(e){console.log(e)}))}},{key:"confirmUserDelete",value:function(){var e=this;window.confirm("\u786e\u5b9a\u5220\u9664\u7528\u6237".concat(this.state.userData.user_name,"\uff1f"))&&f.a.delete("https://api.hailarshell.cn/api/user/single/".concat(this.state.userData.record_num)).then((function(t){200!==t.data.code?alert(t.data.code+"\n"+JSON.stringify(t.data.data)):e.resetStates()})).catch((function(e){alert(e),console.log(e)}))}},{key:"handleFindUserSubmit",value:function(e){var t=this;e.preventDefault(),f.a.get("https://api.hailarshell.cn/api/user/single?filter=".concat(this.state.filter,"&value=").concat(this.state.value)).then((function(e){if(200!==e.data.code)alert(e.data.code+"\n"+JSON.stringify(e.data.data));else{t.setState({userData:e.data.data});var a=e.data.data.record_num;f.a.get("https://api.hailarshell.cn/api/record/user/".concat(a)).then((function(e){200!==e.data.code?(alert(e.data),console.log(e.data)):t.setState({recordListData:e.data.data})})).catch((function(e){alert(e),console.log(e)}))}})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(v.a,{className:"search-form",onSubmit:this.handleFindUserSubmit.bind(this)},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u67e5\u8be2\u6761\u4ef6"),r.a.createElement(v.a.Control,{as:"select",name:"filter",value:this.state.filter,onChange:this.handleChange.bind(this)},r.a.createElement("option",{value:"record_num"},"\u6309\u6362\u6cb9\u8bc1\u53f7\u67e5\u627e"),r.a.createElement("option",{value:"phone"},"\u6309\u624b\u673a\u53f7\u67e5\u627e"),r.a.createElement("option",{value:"plate"},"\u6309\u8f66\u724c\u53f7\u67e5\u627e"))),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u67e5\u8be2\u5185\u5bb9"),r.a.createElement(v.a.Control,{type:"text",name:"value",value:this.state.value,onChange:this.handleChange.bind(this),placeholder:"\u5185\u5bb9"})),r.a.createElement(b.a,{variant:"success",type:"submit"},"\u67e5\u627e")),""!==this.state.userData?this.state.isUserUpdating?r.a.createElement(k.a,{bg:"secondary",text:"white",border:"light",className:"user-form"},r.a.createElement(U,{userData:this.state.userData,cancelUserUpdate:this.cancelUserUpdate.bind(this),confirmUserUpdate:this.confirmUserUpdate.bind(this),handleUserUpdateChange:this.handleUserUpdateChange.bind(this)})):r.a.createElement("div",null,r.a.createElement(k.a,{bg:"secondary",text:"white",border:"light",className:"user-single"},r.a.createElement(D,{userData:this.state.userData}),r.a.createElement(y.a,{style:{margin:"10px"}},r.a.createElement(b.a,{variant:"primary",onClick:this.selectUserUpdate.bind(this)},"\u7f16\u8f91\u5ba2\u6237\u4fe1\u606f"),r.a.createElement(b.a,{variant:"danger",onClick:this.confirmUserDelete.bind(this)},"\u5220\u9664\u5ba2\u6237\u4fe1\u606f")))):"",""!==this.state.userData?r.a.createElement(N,{productData:this.props.productData,giftData:this.props.giftData,operatorData:this.props.operatorData,recordListData:this.state.recordListData,record_num:this.state.userData.record_num,handleFindUserSubmit:this.handleFindUserSubmit.bind(this)}):"")}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={isManual:!1,userData:"",user_name:"",record_num:"",phone:"",plate:"",make:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(g.a)({},n,a))}},{key:"changeManualState",value:function(){this.setState({isManual:!this.state.isManual})}},{key:"handleNewUserSubmit",value:function(e){var t=this;e.preventDefault(),window.confirm("\u8bf7\u6838\u5bf9\u65b0\u7528\u6237\u4fe1\u606f\uff1a\n\u5ba2\u6237\u59d3\u540d\uff1a".concat(this.state.user_name,"\n\u6362\u6cb9\u8bc1\u53f7\uff1a").concat(this.state.isManual?this.state.record_num:"\u81ea\u52a8\u751f\u6210 - "+this.props.admin.location,"\n\u8054\u7cfb\u65b9\u5f0f\uff1a").concat(this.state.phone,"\n\u8f66\u578b\uff1a").concat(this.state.make,"\n\u8f66\u724c\u53f7\uff1a").concat(this.state.plate))&&f()({url:"https://api.hailarshell.cn/api/user/single".concat(this.state.isManual?"":"/"+this.props.admin.location_char),method:"POST",data:{make:this.state.make,phone:this.state.phone,plate:this.state.plate,record_num:this.state.record_num,user_name:this.state.user_name}}).then((function(e){200!==e.data.code?alert(e.data.code+"\n"+JSON.stringify(e.data.data)):t.setState({userData:e.data.data})})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,""!==this.state.userData?r.a.createElement("div",null,r.a.createElement("h3",null,"\u65b0\u7528\u6237\uff1a"),r.a.createElement(k.a,{bg:"secondary",text:"white",border:"light",className:"user-single"},r.a.createElement(D,{userData:this.state.userData})),r.a.createElement("h5",null,"\u8bf7\u8fd4\u56de",r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.props.changeAction("find_user")}},"\u67e5\u627e\u8001\u7528\u6237"),"\u6765\u67e5\u627e\u8be5\u7528\u6237\uff0c\u5e76\u6dfb\u52a0\u4fdd\u517b\u8bb0\u5f55\u3002")):r.a.createElement(v.a,{className:"user-form"},r.a.createElement(v.a.Label,null,"\u5ba2\u6237\u59d3\u540d\uff1a"),r.a.createElement(v.a.Control,{type:"text",name:"user_name",onChange:this.handleChange.bind(this),value:this.state.user_name}),r.a.createElement(v.a.Label,null,"\u6362\u6cb9\u8bc1\u53f7\uff1a",this.props.admin.location,"\u95e8\u5e97"),r.a.createElement(v.a.Check,{onChange:this.changeManualState.bind(this),type:"checkbox",label:"\u624b\u52a8\u8f93\u5165\u95e8\u5e97\u6362\u6cb9\u8bc1\u53f7"}),r.a.createElement(v.a.Control,{type:"text",name:"record_num",onChange:this.handleChange.bind(this),value:this.state.record_num,disabled:this.state.isManual?"":"disabled"}),r.a.createElement(v.a.Label,null,"\u8054\u7cfb\u65b9\u5f0f\uff1a"),r.a.createElement(v.a.Control,{type:"text",name:"phone",onChange:this.handleChange.bind(this),value:this.state.phone}),r.a.createElement(v.a.Label,null,"\u8f66\u724c\u53f7\uff1a"),r.a.createElement(v.a.Control,{type:"text",name:"plate",onChange:this.handleChange.bind(this),value:this.state.plate}),r.a.createElement(v.a.Label,null,"\u8f66\u578b\uff1a"),r.a.createElement(v.a.Control,{type:"text",name:"make",onChange:this.handleChange.bind(this),value:this.state.make}),r.a.createElement(b.a,{variant:"info",onClick:this.handleNewUserSubmit.bind(this)},"\u521b\u5efa")))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"goToTargetRecord",value:function(){alert("\u8df3\u8f6c\u529f\u80fd\u656c\u8bf7\u671f\u5f85~")}},{key:"render",value:function(){var e=this,t=this.props.recordListData;return r.a.createElement("div",{className:"record-list"},r.a.createElement(j.a,{striped:!0,bordered:!0,hover:!0,style:{backgroundColor:"grey",color:"white"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u65e5\u671f"),r.a.createElement("th",null,"\u9879\u76ee\u540d\u79f0"),r.a.createElement("th",null,"\u8868\u793a\u91cc\u7a0b"),r.a.createElement("th",null,"\u8d60\u54c1\u60c5\u51b5"),r.a.createElement("th",null,"\u64cd\u4f5c\u4eba"),r.a.createElement("th",null,"\u79ef\u5206/\u5907\u6ce8"),r.a.createElement("th",null,"\u4fdd\u517b\u63d0\u9192"),r.a.createElement("th",null,"\u64cd\u4f5c"))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{key:t._id,id:t._id},r.a.createElement("td",{className:"record-list-column"},t.date),r.a.createElement("td",{className:"record-list-column"},t.product_name),r.a.createElement("td",{className:"record-list-column"},t.milage),r.a.createElement("td",{className:"record-list-column"},t.gift),r.a.createElement("td",{className:"record-list-column"},t.operator),r.a.createElement("td",{className:"record-list-column"},t.detail),r.a.createElement("td",{className:"record-list-column"},t.reminder),r.a.createElement("td",{className:"record-list-column"},r.a.createElement(b.a,{variant:"primary",onClick:e.goToTargetRecord.bind(e)},"\u67e5\u770b")))})))))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={location_char:"",start:"",end:"",recordListData:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();t.length<2&&(t="0"+t),a.length<2&&(a="0"+a);var r=[n,t,a].join("-");this.findRecordListBetweenDates(this.props.admin.location_char,"2020-01-01",r),this.setState({start:"2020-01-01",end:r,location_char:this.props.admin.location_char})}},{key:"findRecordListBetweenDates",value:function(e,t,a){var n=this;f.a.get("https://api.hailarshell.cn/api/record/period/".concat(e,"?start=").concat(t,"&end=").concat(a)).then((function(e){200!==e.data.code?(console.log(e.data),alert(e.data.code+"\n"+JSON.stringify(e.data.data))):n.setState({recordListData:e.data.data})})).catch((function(e){alert(e),console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(g.a)({},n,a))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"record-search-box"},r.a.createElement("h5",null,"\u6d4f\u89c8\u4fdd\u517b\u8bb0\u5f55"),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u95e8\u5e97"),r.a.createElement(v.a.Control,{as:"select",name:"location_char",defaultValue:"",onChange:this.handleChange.bind(this)},r.a.createElement("option",{value:"",disabled:!0},"\u3010\u8bf7\u9009\u62e9\u3011"),r.a.createElement("option",{value:"HD"},"\u6d77\u62c9\u5c14\u6cb3\u4e1c"),r.a.createElement("option",{value:"H"},"\u6d77\u62c9\u5c14\u6cb3\u897f"),r.a.createElement("option",{value:"M"},"\u6ee1\u6d32\u91cc"),r.a.createElement("option",{value:"Y"},"\u7259\u514b\u77f3"))),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u5f00\u59cb\u65f6\u95f4"),r.a.createElement(v.a.Control,{type:"date",value:this.state.start,name:"start",onChange:this.handleChange.bind(this)})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,null,"\u7ed3\u675f\u65f6\u95f4"),r.a.createElement(v.a.Control,{type:"date",value:this.state.end,name:"end",onChange:this.handleChange.bind(this)})),r.a.createElement(b.a,{variant:"success",onClick:function(){return e.findRecordListBetweenDates(e.state.location_char,e.state.start,e.state.end)}},"\u67e5\u770b")),""!==this.state.recordListData?r.a.createElement(L,{recordListData:this.state.recordListData}):"")}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={action:"recent_record",giftData:[],operatorData:[],productData:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getGiftData(),this.getOperatorData(),this.getProductData()}},{key:"getGiftData",value:function(){var e=this;f.a.get("https://api.hailarshell.cn/api/gift/all").then((function(t){e.setState({giftData:t.data})})).catch((function(e){console.log(e)}))}},{key:"getOperatorData",value:function(){var e=this;f.a.get("https://api.hailarshell.cn/api/operator/all").then((function(t){e.setState({operatorData:t.data})})).catch((function(e){console.log(e)}))}},{key:"getProductData",value:function(){var e=this;f.a.get("https://api.hailarshell.cn/api/product/all").then((function(t){e.setState({productData:t.data})})).catch((function(e){console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(g.a)({},n,a))}},{key:"changeAction",value:function(e){this.setState({action:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"admin"},r.a.createElement("div",{className:"nav-bar"},r.a.createElement(y.a,{style:{width:"600px",margin:"20px"}},r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.changeAction("find_user")}},"\u67e5\u627e\u8001\u7528\u6237"),r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.changeAction("new_user")}},"\u521b\u5efa\u65b0\u7528\u6237"),r.a.createElement(b.a,{variant:"secondary",onClick:function(){return e.changeAction("recent_record")}},"\u6d4f\u89c8\u8bb0\u5f55"))),"find_user"===this.state.action?r.a.createElement(R,{giftData:this.state.giftData,productData:this.state.productData,operatorData:this.state.operatorData}):"","new_user"===this.state.action?r.a.createElement(S,{changeAction:this.changeAction.bind(this),admin:this.props.admin}):"","recent_record"===this.state.action?r.a.createElement(x,{admin:this.props.admin}):"")}}]),t}(n.Component),T=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).state={admin:{},page:"login"},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"setAdmin",value:function(e){this.setState({admin:e})}},{key:"handlePageChange",value:function(e){this.setState({page:e})}},{key:"componentDidMount",value:function(){console.log("client initiated")}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(h,null),"login"===this.state.page?r.a.createElement(_,{setAdmin:this.setAdmin.bind(this),handlePageChange:this.handlePageChange.bind(this)}):"","admin"===this.state.page?r.a.createElement(G,{handlePageChange:this.handlePageChange.bind(this),admin:this.state.admin}):"",r.a.createElement(p,null))}}]),t}(n.Component),M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(T,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/client-shell-v2",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/client-shell-v2","/service-worker.js");M?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):V(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):V(e)}))}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.e4ae4327.chunk.js.map